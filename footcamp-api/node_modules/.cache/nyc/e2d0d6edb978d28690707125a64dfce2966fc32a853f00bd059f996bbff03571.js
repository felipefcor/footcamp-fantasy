var cov_1cuaryukkr=function(){var path="/home/felipe/bootcamp/collab/skylab-bootcamp-201907/staff/felipe-fernandez/footcamp/footcamp-api/logic/player/retrieve/index.spec.js";var hash="80ea05a1e347805f00a980ed5dddfc5234dad6a1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/felipe/bootcamp/collab/skylab-bootcamp-201907/staff/felipe-fernandez/footcamp/footcamp-api/logic/player/retrieve/index.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:17},end:{line:3,column:32}},"2":{start:{line:4,column:14},end:{line:4,column:30}},"3":{start:{line:5,column:61},end:{line:5,column:85}},"4":{start:{line:6,column:34},end:{line:6,column:59}},"5":{start:{line:8,column:32},end:{line:8,column:39}},"6":{start:{line:10,column:0},end:{line:169,column:2}},"7":{start:{line:12,column:4},end:{line:12,column:48}},"8":{start:{line:12,column:18},end:{line:12,column:47}},"9":{start:{line:18,column:4},end:{line:72,column:5}},"10":{start:{line:20,column:8},end:{line:20,column:38}},"11":{start:{line:21,column:8},end:{line:21,column:44}},"12":{start:{line:22,column:8},end:{line:22,column:50}},"13":{start:{line:23,column:8},end:{line:23,column:46}},"14":{start:{line:24,column:8},end:{line:24,column:50}},"15":{start:{line:25,column:8},end:{line:25,column:46}},"16":{start:{line:26,column:8},end:{line:26,column:38}},"17":{start:{line:27,column:8},end:{line:27,column:18}},"18":{start:{line:29,column:8},end:{line:29,column:47}},"19":{start:{line:30,column:8},end:{line:30,column:50}},"20":{start:{line:31,column:8},end:{line:31,column:39}},"21":{start:{line:32,column:8},end:{line:32,column:46}},"22":{start:{line:33,column:8},end:{line:33,column:39}},"23":{start:{line:34,column:8},end:{line:34,column:44}},"24":{start:{line:35,column:8},end:{line:35,column:42}},"25":{start:{line:36,column:8},end:{line:36,column:42}},"26":{start:{line:37,column:8},end:{line:37,column:39}},"27":{start:{line:38,column:8},end:{line:38,column:36}},"28":{start:{line:39,column:8},end:{line:39,column:38}},"29":{start:{line:40,column:8},end:{line:40,column:35}},"30":{start:{line:44,column:8},end:{line:70,column:12}},"31":{start:{line:45,column:12},end:{line:45,column:35}},"32":{start:{line:46,column:12},end:{line:46,column:37}},"33":{start:{line:47,column:12},end:{line:47,column:35}},"34":{start:{line:48,column:12},end:{line:48,column:37}},"35":{start:{line:50,column:26},end:{line:50,column:77}},"36":{start:{line:51,column:12},end:{line:51,column:25}},"37":{start:{line:53,column:26},end:{line:53,column:66}},"38":{start:{line:55,column:27},end:{line:55,column:187}},"39":{start:{line:56,column:12},end:{line:56,column:32}},"40":{start:{line:58,column:25},end:{line:58,column:63}},"41":{start:{line:59,column:12},end:{line:59,column:27}},"42":{start:{line:62,column:12},end:{line:62,column:37}},"43":{start:{line:65,column:12},end:{line:65,column:30}},"44":{start:{line:66,column:12},end:{line:66,column:31}},"45":{start:{line:67,column:12},end:{line:67,column:31}},"46":{start:{line:68,column:12},end:{line:68,column:29}},"47":{start:{line:74,column:4},end:{line:92,column:6}},"48":{start:{line:76,column:23},end:{line:76,column:63}},"49":{start:{line:78,column:12},end:{line:78,column:35}},"50":{start:{line:79,column:12},end:{line:79,column:52}},"51":{start:{line:80,column:12},end:{line:80,column:58}},"52":{start:{line:81,column:12},end:{line:81,column:54}},"53":{start:{line:82,column:12},end:{line:82,column:54}},"54":{start:{line:83,column:12},end:{line:83,column:60}},"55":{start:{line:84,column:12},end:{line:84,column:64}},"56":{start:{line:85,column:12},end:{line:85,column:60}},"57":{start:{line:86,column:12},end:{line:86,column:54}},"58":{start:{line:87,column:12},end:{line:87,column:48}},"59":{start:{line:88,column:12},end:{line:88,column:52}},"60":{start:{line:89,column:12},end:{line:89,column:46}},"61":{start:{line:94,column:8},end:{line:104,column:10}},"62":{start:{line:95,column:12},end:{line:95,column:43}},"63":{start:{line:96,column:12},end:{line:102,column:13}},"64":{start:{line:97,column:16},end:{line:97,column:56}},"65":{start:{line:98,column:16},end:{line:98,column:58}},"66":{start:{line:101,column:16},end:{line:101,column:77}},"67":{start:{line:106,column:8},end:{line:121,column:11}},"68":{start:{line:108,column:16},end:{line:108,column:67}},"69":{start:{line:109,column:16},end:{line:109,column:63}},"70":{start:{line:110,column:16},end:{line:110,column:183}},"71":{start:{line:111,column:16},end:{line:111,column:41}},"72":{start:{line:113,column:16},end:{line:119,column:17}},"73":{start:{line:114,column:21},end:{line:114,column:61}},"74":{start:{line:117,column:21},end:{line:117,column:43}},"75":{start:{line:118,column:21},end:{line:118,column:96}},"76":{start:{line:123,column:8},end:{line:128,column:13}},"77":{start:{line:124,column:12},end:{line:127,column:66}},"78":{start:{line:125,column:16},end:{line:125,column:58}},"79":{start:{line:131,column:8},end:{line:135,column:9}},"80":{start:{line:132,column:12},end:{line:134,column:68}},"81":{start:{line:133,column:16},end:{line:133,column:52}},"82":{start:{line:138,column:8},end:{line:143,column:9}},"83":{start:{line:139,column:13},end:{line:142,column:43}},"84":{start:{line:140,column:12},end:{line:140,column:46}},"85":{start:{line:147,column:8},end:{line:152,column:9}},"86":{start:{line:148,column:13},end:{line:151,column:58}},"87":{start:{line:149,column:17},end:{line:149,column:55}},"88":{start:{line:156,column:8},end:{line:161,column:9}},"89":{start:{line:157,column:13},end:{line:160,column:65}},"90":{start:{line:158,column:17},end:{line:158,column:49}},"91":{start:{line:168,column:4},end:{line:168,column:38}},"92":{start:{line:168,column:16},end:{line:168,column:37}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:36},end:{line:10,column:37}},loc:{start:{line:10,column:42},end:{line:169,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:11},end:{line:12,column:12}},loc:{start:{line:12,column:18},end:{line:12,column:47}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:15},end:{line:18,column:16}},loc:{start:{line:18,column:21},end:{line:72,column:4}},line:18},"3":{name:"(anonymous_3)",decl:{start:{line:44,column:16},end:{line:44,column:17}},loc:{start:{line:44,column:28},end:{line:70,column:9}},line:44},"4":{name:"(anonymous_4)",decl:{start:{line:74,column:41},end:{line:74,column:42}},loc:{start:{line:74,column:53},end:{line:92,column:5}},line:74},"5":{name:"(anonymous_5)",decl:{start:{line:94,column:47},end:{line:94,column:48}},loc:{start:{line:94,column:59},end:{line:104,column:9}},line:94},"6":{name:"(anonymous_6)",decl:{start:{line:106,column:55},end:{line:106,column:56}},loc:{start:{line:106,column:67},end:{line:121,column:10}},line:106},"7":{name:"(anonymous_7)",decl:{start:{line:123,column:47},end:{line:123,column:48}},loc:{start:{line:124,column:12},end:{line:127,column:66}},line:124},"8":{name:"(anonymous_8)",decl:{start:{line:124,column:19},end:{line:124,column:20}},loc:{start:{line:125,column:16},end:{line:125,column:58}},line:125},"9":{name:"(anonymous_9)",decl:{start:{line:131,column:49},end:{line:131,column:50}},loc:{start:{line:132,column:12},end:{line:134,column:68}},line:132},"10":{name:"(anonymous_10)",decl:{start:{line:132,column:19},end:{line:132,column:20}},loc:{start:{line:133,column:16},end:{line:133,column:52}},line:133},"11":{name:"(anonymous_11)",decl:{start:{line:138,column:55},end:{line:138,column:56}},loc:{start:{line:139,column:13},end:{line:142,column:43}},line:139},"12":{name:"(anonymous_12)",decl:{start:{line:139,column:20},end:{line:139,column:21}},loc:{start:{line:140,column:12},end:{line:140,column:46}},line:140},"13":{name:"(anonymous_13)",decl:{start:{line:147,column:48},end:{line:147,column:49}},loc:{start:{line:148,column:13},end:{line:151,column:58}},line:148},"14":{name:"(anonymous_14)",decl:{start:{line:148,column:20},end:{line:148,column:21}},loc:{start:{line:149,column:17},end:{line:149,column:55}},line:149},"15":{name:"(anonymous_15)",decl:{start:{line:156,column:50},end:{line:156,column:51}},loc:{start:{line:157,column:13},end:{line:160,column:65}},line:157},"16":{name:"(anonymous_16)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:158,column:17},end:{line:158,column:49}},line:158},"17":{name:"(anonymous_17)",decl:{start:{line:168,column:10},end:{line:168,column:11}},loc:{start:{line:168,column:16},end:{line:168,column:37}},line:168}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},b:{},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"80ea05a1e347805f00a980ed5dddfc5234dad6a1"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_1cuaryukkr.s[0]++;require('dotenv').config();const{expect}=(cov_1cuaryukkr.s[1]++,require('chai'));const logic=(cov_1cuaryukkr.s[2]++,require('../..'));const{database,models:{User,League,Team,Player}}=(cov_1cuaryukkr.s[3]++,require('footcamp-data'));const{random:{number}}=(cov_1cuaryukkr.s[4]++,require('footcamp-utils'));const{env:{DB_URL_TEST}}=(cov_1cuaryukkr.s[5]++,process);cov_1cuaryukkr.s[6]++;describe('logic - retrieve player',()=>{cov_1cuaryukkr.f[0]++;cov_1cuaryukkr.s[7]++;before(()=>{cov_1cuaryukkr.f[1]++;cov_1cuaryukkr.s[8]++;return database.connect(DB_URL_TEST);});let name,surname,email,password,nameTeam,nameLeague,points,code;let namePlayer,surnamePlayer,playerIid,realTeam,position,pointsPerGame;let totalPoints,yellowCards,redCards,goals,minutes,cost;cov_1cuaryukkr.s[9]++;beforeEach(()=>{cov_1cuaryukkr.f[2]++;cov_1cuaryukkr.s[10]++;name=`name-${Math.random()}`;cov_1cuaryukkr.s[11]++;surname=`surname-${Math.random()}`;cov_1cuaryukkr.s[12]++;email=`email-${Math.random()}@email.com`;cov_1cuaryukkr.s[13]++;password=`password-${Math.random()}`;cov_1cuaryukkr.s[14]++;nameLeague=`nameLeague-${Math.random()}`;cov_1cuaryukkr.s[15]++;nameTeam=`nameTeam-${Math.random()}`;cov_1cuaryukkr.s[16]++;code=`code-${Math.random()}`;cov_1cuaryukkr.s[17]++;points=0;//create player 
cov_1cuaryukkr.s[18]++;namePlayer=`webName-${Math.random()}`;cov_1cuaryukkr.s[19]++;surnamePlayer=`webName-${Math.random()}`;cov_1cuaryukkr.s[20]++;playerId=number(1111,2241111);cov_1cuaryukkr.s[21]++;realTeam=`realTeam-${Math.random()}`;cov_1cuaryukkr.s[22]++;position=number(1111,2241111);cov_1cuaryukkr.s[23]++;pointsPerGame=number(1111,2241111);cov_1cuaryukkr.s[24]++;totalPoints=number(1111,2241111);cov_1cuaryukkr.s[25]++;yellowCards=number(1111,2241111);cov_1cuaryukkr.s[26]++;redCards=number(1111,2241111);cov_1cuaryukkr.s[27]++;goals=number(1111,2241111);cov_1cuaryukkr.s[28]++;minutes=number(1111,2241111);cov_1cuaryukkr.s[29]++;cost=number(1111,2241111);cov_1cuaryukkr.s[30]++;return(async()=>{cov_1cuaryukkr.f[3]++;cov_1cuaryukkr.s[31]++;await User.deleteMany();cov_1cuaryukkr.s[32]++;await League.deleteMany();cov_1cuaryukkr.s[33]++;await Team.deleteMany();cov_1cuaryukkr.s[34]++;await Player.deleteMany();const users=(cov_1cuaryukkr.s[35]++,await User.create({name,surname,email,password}));cov_1cuaryukkr.s[36]++;id=users.id;const league=(cov_1cuaryukkr.s[37]++,new League({id,name:nameLeague,code}));const player=(cov_1cuaryukkr.s[38]++,new Player({name:namePlayer,surname:surnamePlayer,playerId,realTeam,position,pointsPerGame,totalPoints,yellowCards,redCards,goals,minutes,cost}));cov_1cuaryukkr.s[39]++;idPlayer=player.id;const team=(cov_1cuaryukkr.s[40]++,new Team({id,name:nameTeam,points}));cov_1cuaryukkr.s[41]++;team.owner=id;cov_1cuaryukkr.s[42]++;team.players.push(player);cov_1cuaryukkr.s[43]++;await users.save();cov_1cuaryukkr.s[44]++;await league.save();cov_1cuaryukkr.s[45]++;await player.save();cov_1cuaryukkr.s[46]++;await team.save();})();});cov_1cuaryukkr.s[47]++;it('should succeed on correct data',async()=>{cov_1cuaryukkr.f[4]++;const result=(cov_1cuaryukkr.s[48]++,await logic.retrievePlayer(id,idPlayer));cov_1cuaryukkr.s[49]++;expect(result).to.exist;cov_1cuaryukkr.s[50]++;expect(result.name).to.equal(namePlayer);cov_1cuaryukkr.s[51]++;expect(result.surname).to.equal(surnamePlayer);cov_1cuaryukkr.s[52]++;expect(result.position).to.equal(position);cov_1cuaryukkr.s[53]++;expect(result.realTeam).to.equal(realTeam);cov_1cuaryukkr.s[54]++;expect(result.totalPoints).to.equal(totalPoints);cov_1cuaryukkr.s[55]++;expect(result.pointsPerGame).to.equal(pointsPerGame);cov_1cuaryukkr.s[56]++;expect(result.yellowCards).to.equal(yellowCards);cov_1cuaryukkr.s[57]++;expect(result.redCards).to.equal(redCards);cov_1cuaryukkr.s[58]++;expect(result.goals).to.equal(goals);cov_1cuaryukkr.s[59]++;expect(result.minutes).to.equal(minutes);cov_1cuaryukkr.s[60]++;expect(result.cost).to.equal(cost);});cov_1cuaryukkr.s[61]++;it('should fail on incorrect user id',async()=>{cov_1cuaryukkr.f[5]++;cov_1cuaryukkr.s[62]++;id='5d772fb62bb54120d08d7a7b';cov_1cuaryukkr.s[63]++;try{cov_1cuaryukkr.s[64]++;await logic.retrievePlayer(id,idPlayer);cov_1cuaryukkr.s[65]++;throw Error('should not reach this point');}catch({message}){cov_1cuaryukkr.s[66]++;expect(message).to.equal(`User with id ${id} does not exist`);}});cov_1cuaryukkr.s[67]++;it('should fail if the player does not exist',async()=>{cov_1cuaryukkr.f[6]++;cov_1cuaryukkr.s[68]++;await League.create({id,name:nameLeague,code});cov_1cuaryukkr.s[69]++;await Team.create({id,name:nameTeam,points});cov_1cuaryukkr.s[70]++;await Player.create({name:namePlayer,surname:surnamePlayer,playerId,realTeam,position,pointsPerGame,totalPoints,yellowCards,redCards,goals,minutes,cost});cov_1cuaryukkr.s[71]++;await Player.deleteMany();cov_1cuaryukkr.s[72]++;try{cov_1cuaryukkr.s[73]++;await logic.retrievePlayer(id,idPlayer);}catch(error){cov_1cuaryukkr.s[74]++;expect(error).to.exist;cov_1cuaryukkr.s[75]++;expect(error.message).to.equal(`Player with id ${idPlayer} does not exist`);}});cov_1cuaryukkr.s[76]++;it('should fail on undefined id user',()=>{cov_1cuaryukkr.f[7]++;cov_1cuaryukkr.s[77]++;return expect(()=>{cov_1cuaryukkr.f[8]++;cov_1cuaryukkr.s[78]++;return logic.retrievePlayer(undefined,idPlayer);}).to.throw(`id with value undefined is not a string`);});cov_1cuaryukkr.s[79]++;it('should fail on undefined player id',()=>{cov_1cuaryukkr.f[9]++;cov_1cuaryukkr.s[80]++;return expect(()=>{cov_1cuaryukkr.f[10]++;cov_1cuaryukkr.s[81]++;return logic.retrievePlayer(id,undefined);}).to.throw(`player id with value undefined is not a string`);});cov_1cuaryukkr.s[82]++;it('should fail on empty code league id user',()=>{cov_1cuaryukkr.f[11]++;cov_1cuaryukkr.s[83]++;return expect(()=>{cov_1cuaryukkr.f[12]++;cov_1cuaryukkr.s[84]++;return logic.retrievePlayer('',idPlayer);}).to.throw(`id is empty or blank`);});cov_1cuaryukkr.s[85]++;it('should fail on non-string user id',()=>{cov_1cuaryukkr.f[13]++;cov_1cuaryukkr.s[86]++;return expect(()=>{cov_1cuaryukkr.f[14]++;cov_1cuaryukkr.s[87]++;return logic.retrievePlayer(12345,idPlayer);}).to.throw(`id with value 12345 is not a string`);});cov_1cuaryukkr.s[88]++;it('should fail on non-string player id',()=>{cov_1cuaryukkr.f[15]++;cov_1cuaryukkr.s[89]++;return expect(()=>{cov_1cuaryukkr.f[16]++;cov_1cuaryukkr.s[90]++;return logic.retrievePlayer(id,12345);}).to.throw(`player id with value 12345 is not a string`);});cov_1cuaryukkr.s[91]++;after(()=>{cov_1cuaryukkr.f[17]++;cov_1cuaryukkr.s[92]++;return database.disconnect();});});